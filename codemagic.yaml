workflows:
  android-workflow:
    name: Android Build (Debug)
    max_build_duration: 120

    environment:
      groups:
        - google_play

    scripts:
      - name: Set up local.properties
        script: |
          echo "sdk.dir=$ANDROID_SDK_ROOT" > local.properties

      - name: Enable AndroidX
        script: |
          echo "android.useAndroidX=true" >> gradle.properties
          echo "android.enableJetifier=true" >> gradle.properties

      - name: Build Android Debug APK
        script: |
          chmod +x gradlew
          ./gradlew assembleDebug --stacktrace

    artifacts:
      - app/build/outputs/apk/debug/*.apk
